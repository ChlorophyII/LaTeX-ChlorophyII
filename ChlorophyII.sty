\ProvidesPackage{ChlorophyII}
\RequirePackage{amsmath, amssymb, amsthm, mathtools, xstring, xcolor, xargs, xparse}

% ============================================================================ %
% Package required: xcolor
\def\zenburn
{\pagecolor[RGB]{63,63,63}
  \color[RGB]{220,220,205}}

% ============================================================================ %

\let\conjugate\overline
\renewcommand{\Re}[1]{\operatorname{Re}\left({#1}\right)}
\renewcommand{\Im}[1]{\operatorname{Im}\left({#1}\right)}
\newcommand{\perm}[2][n]{\prescript{#1\mkern-2.5mu}{}P_{#2}}
\newcommand{\comb}[2][n]{\prescript{#1\mkern-0.5mu}{}C_{#2}}

\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathbb{C}}

% ============================================================================ %

\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}

% Swap the definition of \abs* and \norm*, so that \abs
% and \norm resizes the size of the brackets, and the 
% starred version does not.
\let\oldabs\abs
\def\abs{\@ifstar{\oldabs}{\oldabs*}}

\let\oldnorm\norm
\def\norm{\@ifstar{\oldnorm}{\oldnorm*}}

% ==================================== %
% Augmented pmatrix
% The arguments are the number of columns before
% and after the vertical line.
\newenvironment{apmatrix}[2]{%
  \left(\begin{array}{@{}*{#1}{c}|*{#2}{c}@{}}
}{%
  \end{array}\right)
}

% ==================================== %
% Augmented bmatrix
% The arguments are the number of columns before
% and after the vertical line.
\newenvironment{abmatrix}[2]{%
  \left[\begin{array}{@{}*{#1}{c}|*{#2}{c}@{}}
}{%
  \end{array}\right]
}

% ==================================== %
% Auto-brackets (round)
% Package required: xstring
\DeclarePairedDelimiter{\@abrr}{(}{)}
\let\@oldabrr\@abrr
\def\@abrr{\@ifstar{\@oldabrr}{\@oldabrr*}}

\def\abrr{\@ifnextchar[{\@abrrArg}{\@abrr}}
\def\@abrrArg[#1]#2{
  \IfEqCase{#1}{
    {normal}{(#2)}
    {big}{\bigl(#2\bigr)}
    {Big}{\Bigl(#2\Bigr)}
    {bigg}{\biggl(#2\biggr)}
    {Bigg}{\Biggl(#2\Biggr)}
  }
}

% ==================================== %
% Auto-brackets (square)
% Package required: xstring
\DeclarePairedDelimiter{\@abrs}{[}{]}
\let\@oldabrs\@abrs
\def\@abrs{\@ifstar{\@oldabrs}{\@oldabrs*}}

\def\abrs{\@ifnextchar[{\@abrsArg}{\@abrs}}
\def\@abrsArg[#1]#2{
  \IfEqCase{#1}{
    {normal}{[#2]}
    {big}{\bigl[#2\bigr]}
    {Big}{\Bigl[#2\Bigr]}
    {bigg}{\biggl[#2\biggr]}
    {Bigg}{\Biggl[#2\Biggr]}
  }
}


% ==================================== %
% Auto-brackets (curly)
% Package required: xstring
\DeclarePairedDelimiter{\@abrc}{\{}{\}}
\let\@oldabrc\@abrc
\def\@abrc{\@ifstar{\@oldabrc}{\@oldabrc*}}

\def\abrc{\@ifnextchar[{\@abrcArg}{\@abrc}}
\def\@abrcArg[#1]#2{
  \IfEqCase{#1}{
    {normal}{\{#2\}}
    {big}{\bigl\{#2\bigr\}}
    {Big}{\Bigl\{#2\Bigr\}}
    {bigg}{\biggl\{#2\biggr\}}
    {Bigg}{\Biggl\{#2\Biggr\}}
  }
}

% ============================================================================ %
% Finite series in expanded form
% \series[index][firstIndex]{generalTerm}
% The first two arguments are optional. Use \n as index in generalTerm
% Example: \series[k][0]{a_{n_\n}}

\def\n{@index}

\newcommandx{\series}[4][1=n,2=1,3=+]
{\noexpandarg\exploregroups
  \IfEqCase{#2}{
    {1}{\StrSubstitute{#4}{\n}{1}#3
      \StrSubstitute{#4}{\n}{2}#3
      \IfEq{#3}{,}{\dots}{\cdots}#3
      \StrSubstitute{#4}{\n}{#1}}
    {0}{\StrSubstitute{#4}{\n}{0}#3
      \StrSubstitute{#4}{\n}{1}#3
      \IfEq{#3}{,}{\dots}{\cdots}#3
      \StrSubstitute{#4}{\n}{#1}}
  }
}

%   ============================================================================ %

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{lemma}[section]{Lemma}

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{conjecture}{Conjecture}[section]
\newtheorem{example}{Example}[section]

\theoremstyle{remark}
\newtheorem*{remark}{Remark}
\newtheorem*{note}{Note}
\newtheorem*{fact}{Fact}

% ============================================================================ %
